# 项目待办事项 (Project TODOs)

## High Priority
- [x] [2026-02-17 10:00] 重构任务管理器UI
    - [x] [2026-02-17 10:00] 将 "任务管理器" 重命名为 "集群管理"
    - [x] [2026-02-17 10:00] 调整菜单层级，将其提升为一级目录核心功能入口
- [x] [2026-02-17 10:00] 实现任务调度与定时执行功能
    - [x] [2026-02-17 10:00] 后端支持基于 Cron 表达式的任务调度
    - [x] [2026-02-17 10:00] 前端开发人性化的定时配置界面（屏蔽 Cron 复杂性）
    - [x] [2026-02-17 10:00] 调研并实现自然语言配置定时任务（如集成 DeepSeek 解析）
    - [x] [2026-02-17 10:00] 实现任务执行冲突处理机制（参考 scheduler 库模式，处理实例重叠运行问题）
- [ ] [2026-02-17 10:00] 开发任务文件关联与在线编辑功能
    - [ ] [2026-02-17 10:00] 设计任务与配置文件的关联数据模型
    - [ ] [2026-02-17 10:00] 实现浏览器端直接查看和修改关联文件（如 frp.ini, nginx.conf）
    - [ ] [2026-02-17 10:00] 优化文件内容展示与编辑体验

## Known Issues / Limitations
- [ ] [2026-02-17 10:00] 调研 PID 硬重启导致的进程追踪丢失问题
    - [ ] [2026-02-17 10:00] 分析日志追踪中断原因，评估是否有可行解决方案


以下人工写的待办清单，下次AI看到后请重新整理
1、安全机制？账号登录机制？账号和设备的管理如何设计？
2、任务除了cron，还需要超时机制，不过这个本质就是参考我原本的process任务设计
3、支持把任务加到开机配置？难点是，没有通过这个程序配置的如果知道已经配过开机自启？
或者说本来也没必要检测所有能开机自启的配置，只要确保有一个能稳定检查开机自启就行？
相当于我每月收入来源太杂不好校验，但又一个一定能稳定收入的渠道就行，校准对其这个就行了，不用全渠道检测。
4、这个服务，怎么更便捷的和syncthing、frp、nginx等工具绑定关联？或者说支持自动"下载安装"？
5、同名检测，当没有目标任务匹配的python时，好像会错匹配到其他环境的python，其实应该直接为空。
6、这个日志输出似乎有些冗余
--- Starting task at 2026-02-17 22:36:50.193574 ---
Command: ['D:\\home\\chenkunze\\data\\m2405network\\sync\\codepc_mf\\nginx-1.26.1\\nginx.exe']
CWD: D:\home\chenkunze\data\m2405network\sync\codepc_mf\nginx-1.26.1
Env PYTHONIOENCODING: utf-8
7、现在任务里的日志好像只有手动才能刷新，不会自动刷新了？
8、再做一个端口的检查工具？
9、用sqlite实现数据存储会比现在json更好吗？
10、任务要支持分组。 还可以甚至组内特征？比如组内只能同时有一个实例？
+、"关于"不是写开发环境，而是给用户介绍这是什么。

# 权限/账号系统
1、我希望每个部署出来的都是一个完整的系统，本质是一个分布式架构，每台设备自身都是一个完整的服务。
2、但可以在云服务器（代号 yun），绑定的域名code4101.py上使用，它其实也是一个分布式的独立节点，但是一个特殊节点，是我放在公网的一个公共节点。
相当于一个红娘角色。
3、任何一个系统上，都要注册账号，设备是严格区分不同的账号进行管理的。
4、当A机器上部署服务，登录的账号B，尝试连接设备C，设备C需要生成一个临时5分钟时效的校验码，输出到设备C的一个文件中，
需要用户B主动去找到校验码，B在A的服务网站上，填写校验，A把校验码发给C，
C验证正确性后，才会在本地数据库中，存储以后来自A机器B账号的权限放通。

注意这个机制，A机器上的D依然是访问不了C的。E机器上的完全相同的账号B，也是无法访问到C的。
因为这是分布式系统！A上的B，和E上的B，哪怕两个B账号密码完全相同，但其实并不能证明他们一定是真的同一个人！
A和E其实是两个完全独立，不同的服务网站。

还有一点，A上的B，要使用A设备，其实也要拿校验码！
因为一台机器上，也不是所有注册的用户，都有权限可以控制本机服务的。



而且注意这个表单数据，本质上是存储在远程设备自身数据里的。比如mi15的名称、py路径，本质是存在mi15服务上的，而不是这里mf的服务。mf只是存储userdevice这里用户对远程设备的配置信息

+ todo
可以每次自定义输入

当工具足够灵活后，配置AI驱动能力，让AI根据自然语言自动执行

直接编辑远程文件的能力

+ 这个不是项目本身的通用功能，而是个人业务层待办
codepc_mf可以配置最新版的frpc和yun服务器联动，让公网也有能力关联到局域网设备
只要局域网8000端口映射出去就行



# 笔记工具/任务管理
仅分析。这个拖拽时间筛选轴，可以默认灰色，然后只在有任务的位置上变蓝色，让用户清晰的知道哪些时间点位置有数据？

